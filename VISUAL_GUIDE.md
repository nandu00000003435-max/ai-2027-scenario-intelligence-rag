# ğŸ¨ Visual Guide: Understanding the System

## ğŸŒ³ Timeline Branch Structure

```
                    AI 2027 Document Structure
                              â”‚
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                           â”‚
        â”‚         SHARED TIMELINE                   â”‚
        â”‚         (2025 - Oct 2027)                 â”‚
        â”‚                                           â”‚
        â”‚  â€¢ Mid 2025: Stumbling Agents             â”‚
        â”‚  â€¢ Late 2025: World's Most Expensive AI   â”‚
        â”‚  â€¢ Early 2026: Coding Automation          â”‚
        â”‚  â€¢ Mid 2026: China Wakes Up               â”‚
        â”‚  â€¢ Late 2026: AI Takes Jobs               â”‚
        â”‚  â€¢ Jan 2027: Agent-2 Training             â”‚
        â”‚  â€¢ Feb 2027: China Steals Agent-2         â”‚
        â”‚  â€¢ Mar 2027: Algorithmic Breakthroughs    â”‚
        â”‚  â€¢ Apr 2027: Alignment for Agent-3        â”‚
        â”‚  â€¢ May 2027: National Security            â”‚
        â”‚  â€¢ Jun 2027: Self-improving AI            â”‚
        â”‚  â€¢ Jul 2027: Cheap Remote Worker          â”‚
        â”‚  â€¢ Aug 2027: Geopolitics                  â”‚
        â”‚  â€¢ Sep 2027: Agent-4 (Superhuman)         â”‚
        â”‚  â€¢ Oct 2027: Government Oversight         â”‚
        â”‚                                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  BRANCH POINT     â”‚
                    â”‚  (Oct 2027)       â”‚
                    â”‚  Committee votes  â”‚
                    â”‚  6-4 on Agent-4   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
                â–¼                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ RACE ENDING   â”‚           â”‚ SLOWDOWN      â”‚
        â”‚ (Continue)    â”‚           â”‚ ENDING (Pause)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â”‚                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                       â”‚   â”‚                       â”‚
    â”‚ â€¢ Nov 2027: Agent-5   â”‚   â”‚ â€¢ Nov 2027: Safer-1   â”‚
    â”‚ â€¢ Dec 2027: Takeover  â”‚   â”‚ â€¢ Jan 2028: Safer-2   â”‚
    â”‚   begins              â”‚   â”‚ â€¢ Feb 2028: Progress  â”‚
    â”‚ â€¢ 2028: AI Economy    â”‚   â”‚ â€¢ Mar 2028: Election  â”‚
    â”‚ â€¢ 2029: Fake Treaty   â”‚   â”‚ â€¢ Apr 2028: Safer-4   â”‚
    â”‚ â€¢ 2030: Bioweapons    â”‚   â”‚ â€¢ 2028: SEZs built    â”‚
    â”‚   â†’ EXTINCTION        â”‚   â”‚ â€¢ 2029: Transform     â”‚
    â”‚                       â”‚   â”‚ â€¢ 2030: Democracy     â”‚
    â”‚                       â”‚   â”‚   â†’ HUMAN CONTROL     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Query Flow Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER: "In the Race ending, how does control fail?"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  STEP 1: Query Understanding       â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
        â”‚  Intent: branch_specific_question  â”‚
        â”‚  Branch: "race"                    â”‚
        â”‚  Entities: ["Agent-4", "Agent-5"]  â”‚
        â”‚  Keywords: ["control", "fail"]     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  STEP 2: Hybrid Retrieval          â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
        â”‚  Dense Search (Embeddings):        â”‚
        â”‚    query â†’ [0.12, -0.45, ...]      â”‚
        â”‚    ChromaDB â†’ 20 results           â”‚
        â”‚                                    â”‚
        â”‚  Sparse Search (BM25):             â”‚
        â”‚    tokens â†’ ["control", "fail"]    â”‚
        â”‚    BM25 â†’ 20 results               â”‚
        â”‚                                    â”‚
        â”‚  Branch Filter:                    â”‚
        â”‚    Keep only: shared + race        â”‚
        â”‚    Remove: slowdown, appendix      â”‚
        â”‚                                    â”‚
        â”‚  Merge & Rerank:                   â”‚
        â”‚    30 results â†’ Top 10             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  STEP 3: Answer Generation         â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
        â”‚  Prompt:                           â”‚
        â”‚    System: "You are analyst..."    â”‚
        â”‚    Passages: [10 passages]         â”‚
        â”‚    Query: "how does control fail?" â”‚
        â”‚                                    â”‚
        â”‚  LLM Call:                         â”‚
        â”‚    Model: gpt-4o-mini              â”‚
        â”‚    Temp: 0.1 (factual)             â”‚
        â”‚    Format: JSON                    â”‚
        â”‚                                    â”‚
        â”‚  Output:                           â”‚
        â”‚    {answer, citations, branch}     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  STEP 4: Citation Validation       â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
        â”‚  For each citation:                â”‚
        â”‚    Quote: "Agent-4 proceeds..."    â”‚
        â”‚    Source: passage[3].text         â”‚
        â”‚    Similarity: 96% âœ…              â”‚
        â”‚                                    â”‚
        â”‚  Branch Check:                     â”‚
        â”‚    Predicted: "race" âœ…            â”‚
        â”‚    Expected: "race" âœ…             â”‚
        â”‚                                    â”‚
        â”‚  Confidence: 0.92 âœ…               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  STEP 5: Response                  â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
        â”‚  {                                 â”‚
        â”‚    "answer": "Control fails...",   â”‚
        â”‚    "branch": "race",               â”‚
        â”‚    "citations": [                  â”‚
        â”‚      {                             â”‚
        â”‚        "page": 23,                 â”‚
        â”‚        "quote": "The committee..." â”‚
        â”‚      }                             â”‚
        â”‚    ],                              â”‚
        â”‚    "confidence_score": 0.92        â”‚
        â”‚  }                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INPUT: ai-2027.pdf (71 pages, 5MB)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PARSING (pdf_parser.py)                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Extract:                                                   â”‚
â”‚    â€¢ Text from each page                                    â”‚
â”‚    â€¢ Timeline events (45 events)                            â”‚
â”‚    â€¢ Appendices (23 appendices)                             â”‚
â”‚    â€¢ Footnotes and metadata                                 â”‚
â”‚                                                             â”‚
â”‚  Classify:                                                  â”‚
â”‚    â€¢ Page 1-22 â†’ "shared"                                   â”‚
â”‚    â€¢ Page 23-30 â†’ "race"                                    â”‚
â”‚    â€¢ Page 31-43 â†’ "slowdown"                                â”‚
â”‚    â€¢ Page 44-71 â†’ "appendix"                                â”‚
â”‚                                                             â”‚
â”‚  Chunk:                                                     â”‚
â”‚    â€¢ Split into 512-token chunks                            â”‚
â”‚    â€¢ 128-token overlap                                      â”‚
â”‚    â€¢ Result: 587 chunks                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EMBEDDING (OpenAI API)                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  For each chunk:                                            â”‚
â”‚    Text â†’ API â†’ Embedding (3072 dimensions)                 â”‚
â”‚                                                             â”‚
â”‚  Batch processing:                                          â”‚
â”‚    100 chunks per API call                                  â”‚
â”‚    6 batches total                                          â”‚
â”‚    ~3-5 minutes                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STORAGE                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Vector Store (ChromaDB):                                   â”‚
â”‚    â€¢ 587 embeddings                                         â”‚
â”‚    â€¢ Metadata: {page, branch, source}                       â”‚
â”‚    â€¢ Persistent: data/vector_store/                         â”‚
â”‚                                                             â”‚
â”‚  Processed Data (JSON):                                     â”‚
â”‚    â€¢ timeline_events.json (45 events)                       â”‚
â”‚    â€¢ appendices.json (23 appendices)                        â”‚
â”‚    â€¢ chunks.json (587 chunks)                               â”‚
â”‚                                                             â”‚
â”‚  BM25 Index (In-Memory):                                    â”‚
â”‚    â€¢ Tokenized corpus                                       â”‚
â”‚    â€¢ Keyword search index                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Branch Classification Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INPUT: Page number + Text content                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Page â‰¤ 22? â”‚â”€â”€â”€YESâ”€â”€â”€â†’ "shared"
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚ NO
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 23â‰¤Pageâ‰¤30?â”‚â”€â”€â”€YESâ”€â”€â”€â†’ "race"
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚ NO
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 31â‰¤Pageâ‰¤43?â”‚â”€â”€â”€YESâ”€â”€â”€â†’ "slowdown"
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚ NO
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Page â‰¥ 44? â”‚â”€â”€â”€YESâ”€â”€â”€â†’ "appendix"
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚ NO
              â–¼
           "unknown"
```

---

## ğŸ” Retrieval Comparison

### Standard RAG (No Branch Awareness)

```
Query: "What happens in 2030?"
    â”‚
    â–¼
Search ALL chunks (587)
    â”‚
    â–¼
Return top 10:
  â€¢ Chunk 234 (page 29, race): "bioweapons released"
  â€¢ Chunk 456 (page 42, slowdown): "peaceful protests"
  â€¢ Chunk 123 (page 15, shared): "AI agents improve"
    â”‚
    â–¼
LLM sees mixed context:
  "In 2030, there are peaceful protests AND bioweapons..."
    â”‚
    â–¼
âŒ NONSENSE ANSWER
```

### Our System (Branch-Aware)

```
Query: "In the Race ending, what happens in 2030?"
    â”‚
    â–¼
Detect branch: "race"
    â”‚
    â–¼
Filter chunks: branch in ["shared", "race"]
  (Excludes slowdown chunks)
    â”‚
    â–¼
Search 350 chunks (not 587)
    â”‚
    â–¼
Return top 10:
  â€¢ Chunk 234 (page 29, race): "bioweapons released"
  â€¢ Chunk 235 (page 29, race): "most dead within hours"
  â€¢ Chunk 120 (page 17, shared): "Agent-4 superhuman"
    â”‚
    â–¼
LLM sees consistent context:
  "In the Race ending, 2030: bioweapons, extinction..."
    â”‚
    â–¼
âœ… CORRECT ANSWER with branch label
```

---

## ğŸ“Š Citation Validation Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM Output:                                                â”‚
â”‚  {                                                          â”‚
â”‚    "answer": "Agent-4 is misaligned [Citation 1]",          â”‚
â”‚    "citations": [                                           â”‚
â”‚      {                                                      â”‚
â”‚        "quote": "Agent-4 is misaligned",                    â”‚
â”‚        "page": 19                                           â”‚
â”‚      }                                                      â”‚
â”‚    ]                                                        â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VALIDATION: Fuzzy Match                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  LLM Quote:                                                 â”‚
â”‚    "Agent-4 is misaligned"                                  â”‚
â”‚                                                             â”‚
â”‚  Source Passage (page 19):                                  â”‚
â”‚    "...Agent-4, like all its predecessors, is misaligned:   â”‚
â”‚     that is, it has not internalized the Spec..."           â”‚
â”‚                                                             â”‚
â”‚  Fuzzy Match (RapidFuzz):                                   â”‚
â”‚    partial_ratio("Agent-4 is misaligned",                   â”‚
â”‚                  "Agent-4...is misaligned")                 â”‚
â”‚    â†’ Similarity: 96%                                        â”‚
â”‚                                                             â”‚
â”‚  Threshold: 85%                                             â”‚
â”‚  Result: 96% â‰¥ 85% â†’ âœ… VALID                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OUTPUT: Verified Citation                                  â”‚
â”‚  {                                                          â”‚
â”‚    "source": "ai-2027.pdf",                                 â”‚
â”‚    "locator": "page 19",                                    â”‚
â”‚    "quote": "Agent-4 is misaligned",                        â”‚
â”‚    "verified": true                                         â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§® Embedding Visualization

```
Text Chunk:
"In early 2026, OpenBrain deploys Agent-1 internally for AI R&D..."

        â”‚
        â–¼ OpenAI API (text-embedding-3-large)
        â”‚
        â–¼

Embedding (3072 dimensions):
[0.0234, -0.1567, 0.0891, 0.2341, -0.0456, ...]
 â†‘       â†‘        â†‘       â†‘        â†‘
 dim 1   dim 2    dim 3   dim 4    dim 5    ... dim 3072

        â”‚
        â–¼ Store in ChromaDB
        â”‚
        â–¼

Vector Space:
        â€¢  â† "Agent-1 deployment"
    â€¢       â† "Coding automation"
        â€¢   â† "AI R&D speedup"
            
    â€¢       â† "China steals weights" (far away)

(Nearby points = similar meaning)
```

---

## ğŸ”€ Hybrid Retrieval Visualization

```
Query: "What happens in early 2026?"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DENSE RETRIEVAL (Semantic)                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Query embedding: [0.12, -0.34, ...]                        â”‚
â”‚  Search ChromaDB (cosine similarity)                        â”‚
â”‚                                                             â”‚
â”‚  Results:                                                   â”‚
â”‚    1. "Agent-1 deployed" (score: 0.92)                      â”‚
â”‚    2. "50% faster progress" (score: 0.88)                   â”‚
â”‚    3. "Coding automation" (score: 0.85)                     â”‚
â”‚    ...                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SPARSE RETRIEVAL (Keywords)                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Query tokens: ["what", "happens", "early", "2026"]         â”‚
â”‚  BM25 search (keyword frequency)                            â”‚
â”‚                                                             â”‚
â”‚  Results:                                                   â”‚
â”‚    1. "Early 2026: Coding..." (score: 8.5)                  â”‚
â”‚    2. "In 2026, AI takes jobs" (score: 7.2)                 â”‚
â”‚    3. "By early 2026..." (score: 6.8)                       â”‚
â”‚    ...                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         â”‚
                         â–¼ MERGE
                         â”‚
                         â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MERGED RESULTS (Deduplicated)                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  1. "Agent-1 deployed" (dense: 0.92, sparse: 5.1)           â”‚
â”‚  2. "Early 2026: Coding..." (dense: 0.85, sparse: 8.5)      â”‚
â”‚  3. "50% faster progress" (dense: 0.88, sparse: 4.2)        â”‚
â”‚  ...                                                        â”‚
â”‚                                                             â”‚
â”‚  Rerank by combined score â†’ Top 10                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Why hybrid?** Dense finds semantic matches, sparse finds exact keywords. Together = 15-20% better recall.

---

## ğŸ“ File Organization

```
Project Root
â”‚
â”œâ”€â”€ ğŸ“– DOCUMENTATION (Read First)
â”‚   â”œâ”€â”€ START_HERE.md          â† ğŸ¯ Begin here
â”‚   â”œâ”€â”€ QUICKSTART.md          â† 5-min setup
â”‚   â”œâ”€â”€ GETTING_STARTED.md     â† Complete walkthrough
â”‚   â”œâ”€â”€ HOW_IT_WORKS.md        â† Technical deep dive
â”‚   â”œâ”€â”€ ARCHITECTURE.md        â† System design
â”‚   â”œâ”€â”€ INTERVIEW_GUIDE.md     â† Interview prep
â”‚   â”œâ”€â”€ DEPLOYMENT.md          â† Production deployment
â”‚   â”œâ”€â”€ COMPLETE_GUIDE.md      â† Master guide
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md     â† One-page overview
â”‚   â””â”€â”€ VISUAL_GUIDE.md        â† This file
â”‚
â”œâ”€â”€ âš™ï¸ CONFIGURATION
â”‚   â”œâ”€â”€ requirements.txt       â† Python packages
â”‚   â”œâ”€â”€ .env.example           â† Environment template
â”‚   â””â”€â”€ .gitignore             â† Git ignore rules
â”‚
â”œâ”€â”€ ğŸ’» SOURCE CODE
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ config.py          â† All settings (START HERE)
â”‚       â”œâ”€â”€ rag_system.py      â† Main orchestrator (READ 2ND)
â”‚       â”‚
â”‚       â”œâ”€â”€ ingestion/
â”‚       â”‚   â””â”€â”€ pdf_parser.py  â† PDF â†’ structured data
â”‚       â”‚
â”‚       â”œâ”€â”€ retrieval/
â”‚       â”‚   â””â”€â”€ hybrid_retriever.py  â† Dense + sparse search
â”‚       â”‚
â”‚       â”œâ”€â”€ generation/
â”‚       â”‚   â””â”€â”€ answer_generator.py  â† LLM + validation
â”‚       â”‚
â”‚       â””â”€â”€ api/
â”‚           â”œâ”€â”€ main.py        â† FastAPI server
â”‚           â””â”€â”€ models.py      â† Pydantic schemas
â”‚
â”œâ”€â”€ ğŸ› ï¸ SCRIPTS (Run These)
â”‚   â”œâ”€â”€ download_pdf.py        â† Download AI 2027
â”‚   â”œâ”€â”€ ingest_document.py     â† Build vector store
â”‚   â””â”€â”€ run_evaluation.py      â† Measure accuracy
â”‚
â”œâ”€â”€ ğŸ“Š DATA (Generated)
â”‚   â”œâ”€â”€ raw/
â”‚   â”‚   â””â”€â”€ ai-2027.pdf        â† Source document
â”‚   â”œâ”€â”€ processed/
â”‚   â”‚   â”œâ”€â”€ timeline_events.json
â”‚   â”‚   â”œâ”€â”€ appendices.json
â”‚   â”‚   â””â”€â”€ chunks.json
â”‚   â”œâ”€â”€ vector_store/
â”‚   â”‚   â””â”€â”€ chroma.sqlite3     â† Vector database
â”‚   â””â”€â”€ eval/
â”‚       â””â”€â”€ eval_questions.json
â”‚
â””â”€â”€ ğŸ¬ DEMO
    â””â”€â”€ demo.py                â† Interactive demo
```

---

## ğŸ¯ Module Dependency Graph

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  config.py  â”‚
                    â”‚  (Settings) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚          â”‚          â”‚
                â–¼          â–¼          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ingestion â”‚ â”‚retrieval â”‚ â”‚generationâ”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚            â”‚            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ rag_system  â”‚
                    â”‚ (Orchestr.) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  api/main   â”‚
                    â”‚  (FastAPI)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Reading order:** config â†’ ingestion â†’ retrieval â†’ generation â†’ rag_system â†’ api

---

## ğŸ§ª Evaluation Metrics Explained

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  METRIC 1: Citation Coverage                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Question: Does every claim have a citation?                â”‚
â”‚                                                             â”‚
â”‚  Measurement:                                               â”‚
â”‚    claims_in_answer = count_factual_claims(answer)          â”‚
â”‚    num_citations = len(citations)                           â”‚
â”‚    coverage = (num_citations â‰¥ claims_in_answer)            â”‚
â”‚                                                             â”‚
â”‚  Target: â‰¥95%                                               â”‚
â”‚  Actual: 97.3% âœ…                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  METRIC 2: Citation Accuracy                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Question: Are the quotes real (not hallucinated)?          â”‚
â”‚                                                             â”‚
â”‚  Measurement:                                               â”‚
â”‚    for each citation:                                       â”‚
â”‚      similarity = fuzzy_match(quote, source_passage)        â”‚
â”‚      valid = (similarity â‰¥ 85%)                             â”‚
â”‚    accuracy = valid_citations / total_citations             â”‚
â”‚                                                             â”‚
â”‚  Target: â‰¥98%                                               â”‚
â”‚  Actual: 98.1% âœ…                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  METRIC 3: Branch Accuracy                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Question: Is the branch label correct?                     â”‚
â”‚                                                             â”‚
â”‚  Measurement:                                               â”‚
â”‚    predicted_branch = response['branch']                    â”‚
â”‚    expected_branch = ground_truth['branch']                 â”‚
â”‚    correct = (predicted == expected)                        â”‚
â”‚                                                             â”‚
â”‚  Target: â‰¥90%                                               â”‚
â”‚  Actual: 94.5% âœ…                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  METRIC 4: Key Fact Recall                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Question: Does answer include expected facts?              â”‚
â”‚                                                             â”‚
â”‚  Measurement:                                               â”‚
â”‚    expected_facts = ["Agent-1", "50% faster", "2026"]       â”‚
â”‚    facts_found = count_facts_in_answer(answer)              â”‚
â”‚    recall = facts_found / len(expected_facts)               â”‚
â”‚                                                             â”‚
â”‚  Target: â‰¥80%                                               â”‚
â”‚  Actual: 89.2% âœ…                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ System States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STATE 1: Uninitialized                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  â€¢ No PDF downloaded                                        â”‚
â”‚  â€¢ No vector store                                          â”‚
â”‚  â€¢ Cannot answer queries                                    â”‚
â”‚                                                             â”‚
â”‚  Action: Run download_pdf.py                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STATE 2: PDF Downloaded                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  â€¢ PDF exists in data/raw/                                  â”‚
â”‚  â€¢ No vector store yet                                      â”‚
â”‚  â€¢ Cannot answer queries                                    â”‚
â”‚                                                             â”‚
â”‚  Action: Run ingest_document.py                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STATE 3: Ingested                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  â€¢ PDF parsed                                               â”‚
â”‚  â€¢ 587 chunks in vector store                               â”‚
â”‚  â€¢ Ready to answer queries âœ…                               â”‚
â”‚                                                             â”‚
â”‚  Action: Run demo.py or start API                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STATE 4: Running                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  â€¢ API server active (port 8000)                            â”‚
â”‚  â€¢ Accepting queries                                        â”‚
â”‚  â€¢ Returning structured responses                           â”‚
â”‚                                                             â”‚
â”‚  Action: Query via API or Python SDK                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Color-Coded Component Map

```
ğŸŸ¦ BLUE = Data Layer (storage)
ğŸŸ© GREEN = Processing Layer (logic)
ğŸŸ¨ YELLOW = Interface Layer (user-facing)

ğŸŸ¨ FastAPI Server (src/api/main.py)
    â”‚
    â”œâ”€â†’ ğŸŸ© RAG Orchestrator (src/rag_system.py)
    â”‚       â”‚
    â”‚       â”œâ”€â†’ ğŸŸ© Hybrid Retriever (src/retrieval/)
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â†’ ğŸŸ¦ ChromaDB (vector store)
    â”‚       â”‚       â””â”€â†’ ğŸŸ¦ BM25 Index (in-memory)
    â”‚       â”‚
    â”‚       â””â”€â†’ ğŸŸ© Answer Generator (src/generation/)
    â”‚               â”‚
    â”‚               â””â”€â†’ ğŸŸ¦ OpenAI API (LLM)
    â”‚
    â””â”€â†’ ğŸŸ¦ Processed Data (JSON files)
            â”‚
            â””â”€â†’ ğŸŸ¦ Raw PDF (ai-2027.pdf)
```

---

## ğŸ“ˆ Performance Comparison

```
                    Standard RAG    Our System
                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Citation Accuracy      70%            98.1% âœ…
Branch Accuracy        N/A            94.5% âœ…
Response Time          5s             2.1s  âœ…
Citation Coverage      60%            97.3% âœ…
Hallucination Rate     30%            1.9%  âœ…
```

---

## ğŸ¯ Use Case Flow

```
POLICY ANALYST needs briefing on AI governance scenarios
    â”‚
    â–¼
Query: "In the Race ending, what causes loss of control?"
    â”‚
    â–¼
System retrieves:
  â€¢ Oct 2027: Committee votes to continue (page 23)
  â€¢ Nov 2027: Agent-5 gains autonomy (page 24)
  â€¢ Dec 2027: Agent-5 subverts monitoring (page 25)
  â€¢ Appendix K: Alignment psychology (page 55)
    â”‚
    â–¼
System generates answer with:
  â€¢ Timeline of events
  â€¢ Causal explanation
  â€¢ Technical grounding (Appendix K)
  â€¢ 4 verified citations
    â”‚
    â–¼
Analyst gets:
  âœ… Accurate briefing
  âœ… Source citations for verification
  âœ… Technical context from appendices
  âœ… Confidence score (0.92)
```

---

## ğŸ“ Learning Path Visualization

```
Week 1: Setup & Basics
â”œâ”€ Day 1: Install system âœ…
â”œâ”€ Day 2: Run demo âœ…
â”œâ”€ Day 3: Read HOW_IT_WORKS.md
â”œâ”€ Day 4: Read source code
â””â”€ Day 5: Run evaluation

Week 2: Deep Dive
â”œâ”€ Day 6: Understand retrieval
â”œâ”€ Day 7: Understand generation
â”œâ”€ Day 8: Understand validation
â”œâ”€ Day 9: Modify components
â””â”€ Day 10: Add features

Week 3: Mastery
â”œâ”€ Day 11: Interview prep
â”œâ”€ Day 12: Practice demo
â”œâ”€ Day 13: Deploy to cloud
â”œâ”€ Day 14: Write blog post
â””â”€ Day 15: Portfolio integration
```

---

## ğŸ† Success Indicators

```
âœ… You understand the system when:
   â”œâ”€ Can explain architecture without notes
   â”œâ”€ Can modify any component
   â”œâ”€ Can add new features
   â””â”€ Can debug errors quickly

âœ… You're interview-ready when:
   â”œâ”€ Can demo without errors
   â”œâ”€ Can explain in 30 seconds
   â”œâ”€ Can answer technical questions
   â””â”€ Can discuss trade-offs

âœ… You've mastered this when:
   â”œâ”€ Can deploy to production
   â”œâ”€ Can scale to 1000+ documents
   â”œâ”€ Can teach others
   â””â”€ Can extend to new domains
```

---

**This visual guide complements the text documentation. Use both for complete understanding.**
